# 🌩️ KUMO: Generative Evaluation of Complex Reasoning in Large Language Models

**Official Repository** for the paper: [Generative Evaluation of Complex Reasoning in Large Language Models]()

✨ **KUMO** is a novel benchmark designed to systematically evaluate the complex reasoning capabilities of Large Language Models (LLMs) through procedurally generated reasoning games. Explore the limits of LLM reasoning and track model performance on our interactive leaderboard.

📊 Visit our [Leaderboard & Results Page]()

---

## 🚀 Quick Links

- 📂 [Benchmark Dataset](#benchmark-dataset)
- 📑 [Benchmark Format](#benchmark-format)
- ⚙️ [Environment Setup](#environment-setup)
- 🛠️ [Dataset Generation](#dataset-generation)
- 📈 [Evaluation](#evaluation)

---

## 📂 Benchmark Dataset

The **KUMO** benchmark introduces procedurally generated reasoning games structured around:

- 🔍 **Truth Set ($T$)**: Possible truths.
- 🎯 **Action Set ($A$)**: Available actions.
- 🌟 **Outcomes ($\mathcal{O}$)**: Action-based outcomes.
- 📚 **Knowledge Book ($K$)**: Detailed guidelines linking truths, actions, and outcomes.

### Gameplay Mechanics:
- A valid truth ($t^*$) is secretly chosen.
- Players take actions and observe outcomes.
- Deduce the truth efficiently using logic and reasoning.

🧑‍⚕️ **Example Scenario**: Diagnosing diseases using medical tests.

📌 **Provided Domains**:
- 100 autogenerated exemplar domains
- Categories: Computer Science, Biology, Art, and more
- Typical domain: ~50 truths, ~30 actions

![KUMO Example](https://github.com/linhaowei1/kumo/blob/main/miscs/fig1.png)

---

## 📑 Benchmark Format

The KUMO dataset is provided in **JSON format**, simplifying integration and customization. Data available at [KUMO/env](https://github.com/linhaowei1/kumo/tree/main/env):

```
kumo/
└── env/
    ├── data/
    │   └── [DomainName]_data.py
    ├── [DomainName]/
    │   ├── knowledge_book/
    │   │   └── truth_num=4+action_num=6+valid_truth_num=1/
    │   │       ├── seed=0.txt
    │   │       └── ...
    │   └── truth_num=4+action_num=6+valid_truth_num=1.jsonl
    └── [DomainName].py
```

⚙️ **Customize** parameters (`truth_num`, `action_num`, etc.) easily for tailored benchmarking.

---

## ⚙️ Environment Setup

### 🔽 Clone the Repository

```bash
git clone https://github.com/linhaowei1/kumo.git
cd kumo
```

### 📦 Install Dependencies

Recommended: Conda with Python (3.10 to 3.12):

```bash
conda create -n kumo python=3.12
conda activate kumo
pip install -r requirements.txt
```

---

## 🛠️ Dataset Generation

Create customized domains and scenarios easily:

### 1️⃣ **Seed Configuration**

Generate scenarios via LLM:

```bash
python generate/config_generation.py \
  --load_type OPENAI \
  --api_base http://localhost:8001/v1 \
  --api_key EMPTY \
  --data_path ./templates/config_generation.jsonl
```

🔗 [Detailed Instructions](https://github.com/linhaowei1/kumo/blob/main/examples/config_generation.sh)

### 2️⃣ **Task Instances via SAT Sampling**

Generate specific tasks:

```bash
python SAT_sampling.py \
  --truth_num 4 \
  --action_num 6 \
  --valid_truth_num 1 \
  --data_num 50 \
  --domain MedicalEnv
```

🔗 [Example Script](https://github.com/linhaowei1/kumo/blob/main/examples/SAT_sampling.sh)

### 3️⃣ **Knowledge Book Generation**

Automatically build detailed knowledge bases:

```bash
python knowledge_book_generation.py \
  --load_type OPENAI \
  --api_base http://localhost:8001/v1 \
  --api_key EMPTY \
  --data_num 50 \
  --truth_num 4 \
  --action_num 6 \
  --valid_truth_num 1 \
  --domain MedicalEnv
```

🔗 [Example](https://github.com/linhaowei1/kumo/blob/main/examples/knowledge_book_generation.sh)

### 4️⃣ **Optional Knowledge Book Refinement**

Improve generated knowledge books:

```bash
python generate/knowledge_book_revision.py \
  --load_type OPENAI \
  --api_base http://localhost:8001/v1 \
  --api_key EMPTY \
  --domain MedicalEnv \
  --revision_template_path ./templates/revision_template.md
```

🔗 [Revision Details](https://github.com/linhaowei1/kumo/blob/main/examples/knowledge_book_revision.sh)

---

## 📈 Evaluation

### 🤖 **Vanilla Agent**
Evaluate standard models (e.g., GPT-4o, Anthropic APIs):

- Results: [results/](https://github.com/linhaowei1/kumo/tree/main/results)
- Example scripts: [examples/main.sh](https://github.com/linhaowei1/kumo/tree/main/examples/main.sh)

Customize by adding your own API keys and parameters.

### 🎨 **Custom Agents**

Design your custom reasoning agents (e.g., ReactAgent):

🔗 [Agent Templates](https://github.com/linhaowei1/kumo/tree/main/agents)

---

💬 **Support & Questions**

For support, feedback, or inquiries, please:
- Open an issue on GitHub
- Contact the repository maintainers directly
